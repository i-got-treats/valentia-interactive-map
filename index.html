<!DOCTYPE html>
<html style="height: 100%; width:100%; margin: 0;">
<head>
    <style>
        /* grid 
        .leaflet-tile { border: solid rgba(255, 255, 255, 0.406) 1px;}
        grid end*/

        /* change layers ansicht */
        .leaflet-control-layers-toggle{
            height: 0px!important;
        }
        .leaflet-control-layers {
            overflow-y: auto;
            max-height: 95%;
            max-height: 95vh;
            position: sticky!important;
            width: auto;
            color:rgba(0, 0, 0, 0.4)!important;
            opacity: 0.5;
            background-color: rgba(197, 212, 221, 0.8)!important;
            transition: .2s;
        }
        .leaflet-control-layers:hover {
            opacity: 1;
        }
        .leaflet-control-layers:before{
            padding-left: 25px;
            padding-right: 25px;
            padding-top: 20px;
            font-size: 20px;
            font-weight: bold;
            content:"Map Legend";
            color:rgba(0, 0, 0, .7);
        }
        /*no radio/checkbox button*/
        [type="radio"]{
            visibility:hidden;
        }
        [type="checkbox"] {
            visibility:hidden;
        }
        input[type=checkbox]:checked + span{
            color:rgba(0, 0, 0, 0.7) !important;
            font-weight: bold;
        }

        .clickable{
            cursor: pointer;
        }
        /* for the message at the top */
        .unboldify {
            padding-right: 25px!important;
            font-size: 10px;
            font-style: italic;
            font-weight: 100!important;
            text-decoration: underline;
        }

        /* change layers ansicht end*/

        /*POPUP STYLE*/
        .leaflet-popup-content-wrapper {
            /*max-width: 200px;
            max-height: 110px;
            overflow-y: auto;
            overflow-x: hidden;*/
            text-align: center!important;
            background: rgba(98, 98, 98, 0.8)!important;
            color: rgb(220, 220, 220)!important;
            font-size: 13px!important;
            line-height: 24px!important;
            border-radius: 0px!important;
            border: 2px solid rgba(185, 185, 185, 0.8)!important;
            box-shadow:rgba(0, 0, 0, .5) 0px 0px 10px!important;
        }
        .leaflet-popup-content {
            padding-right: 15px!important;
            padding-left: 15px!important;
            margin-right: 0px!important;
            margin-left: 0px!important;
            max-width: 200px!important;
            max-height: 110px!important;
            overflow-y: auto;
            overflow-x: hidden;
            }
        .leaflet-popup-content-wrapper a {
            color: rgba(200, 200, 200, 0.1)!important;
        }
        /* the triangle */
        .leaflet-popup-tip { 
            background: rgba(185, 185, 185, .3)!important;
            border: 2px solid rgba(185, 185, 185, 0.8)!important;
            box-shadow: rgba(0, 0, 0, .3) 0px 0px 10px!important;
        }
        .leaflet-container a.leaflet-popup-close-button {
            color: rgba(185, 185, 185, 0.8)!important;
        }
        .leaflet-container a.leaflet-popup-close-button:hover {
            color: #999;
        }
        /*POPUP STYLEs end*/



        /* TOOLTIP STYLES */
        .countries {
            text-align: center;
            line-height: 0.7;
            background: rgba(0, 0, 0, 0)!important;
            border: none!important;
            box-shadow: none!important;
            text-shadow:-1px 0px 2px rgba(46, 46, 46, 0.3),
                        0px 1px 2px rgba(46, 46, 46, 0.3),
                        1px 0px 2px rgba(46, 46, 46, 0.3),
                        0px -1px 2px rgba(46, 46, 46, 0.3);
            color:rgba(255, 255, 255, 0.8)!important;
            font-size: 35px;
            font-family: Copperplate Gothic Light;
        }

        .lakes {
            text-align: center;
            line-height: 1;
            background: rgba(0, 0, 0, 0)!important;
            border: none!important;
            box-shadow: none!important;
            text-shadow:-1px 0px 1px rgba(255, 255, 255, 0.4),
                        0px 1px 1px rgba(255, 255, 255, 0.4),
                        1px 0px 1px rgba(255, 255, 255, 0.4),
                        0px -1px 1px rgba(255, 255, 255, 0.4);
            color:rgba(28, 31, 47, 0.8)!important;
            font-size: 15px;
        }



        /* no triangle at tooltip */
        .leaflet-tooltip-top:before, 
        .leaflet-tooltip-bottom:before, 
        .leaflet-tooltip-left:before, 
        .leaflet-tooltip-right:before {
            border: none !important;
        }
        /* TOOLTIPS STYLES end*/
    </style>

    <title>Map of Valentia</title>

    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">

    <!-- leflet import -->
    <link rel="stylesheet" href="scripts\leaflet\leaflet.css">
    <script src="scripts\leaflet\leaflet.js"></script>
    <!-- grouped layer import-->
    <link rel="stylesheet" href="scripts\dist\leaflet.groupedlayercontrol.min.css">
    <script src="scripts\dist\leaflet.groupedlayercontrol.min.js"></script>

</head>
<body style="height: 100%; width:100%;  margin: 0;">

<!-- map holder -->
<div id="map" style="margin-left:auto; margin-right:auto; width:100%; height: 100%; background: #6B7983">
</div>

<script type="text/javascript">
    //variables
    var mapSW = [0, 8192],
        mapNE = [8192, 0];
    var customMinZoom = 1;
    var customMaxZoom = 4;
    //variables end

    // Declare Map Object
    var map = L.map('map').setView([0, 0], customMinZoom);

    // Reference the tiles
    L.tileLayer('images/tiles/{z}/{x}/{y}.png',{
    minZoom: customMinZoom, maxZoom: customMaxZoom,
    noWrap: true,
    crs: L.CRS.Simple,}
    ).addTo(map);

    // map bounces back when you try to leave
    map.setMaxBounds(new L.LatLngBounds(
        map.unproject(mapNE, (customMaxZoom+1)),
        map.unproject(mapSW, (customMaxZoom+1))
    ));
    // no zoom on doubleclick
    map.doubleClickZoom.disable();

    /* =========================
    ICONS
    ============================*/
    var i_size = [46, 40];
    var i_anchor = [23, 20];
    var p_anchor = [0, -46];

    var doticon = L.icon({
        iconUrl: 'images/icons/unused/dot.png',
        iconSize: i_size, iconAnchor: i_anchor, popupAnchor: p_anchor
    });

    /* BUILDINGS*/
    var colig_i = L.icon({
        iconUrl: 'images/icons/buildings/colig.png',
        iconSize: i_size, iconAnchor: i_anchor, popupAnchor: p_anchor
    })

    var lighthouse_i = L.icon({
        iconUrl: 'images/icons/buildings/lighthouse.png',
        iconSize: i_size, iconAnchor: i_anchor, popupAnchor: p_anchor
    });

    /* LANDMARKS*/

    /*LOCATIONS*/

    /* SETTLEMENTS */
    var camp_i = L.icon({
        iconUrl: 'images/icons/settlements/camp.png',
        iconSize: i_size, iconAnchor: i_anchor, popupAnchor: p_anchor
    })

    var city_i = L.icon({
        iconUrl: 'images/icons/settlements/city.png',
        iconSize: [85, 60],
        iconAnchor: [42, 30],
        popupAnchor: [0, -36]
    });

    var town_i = L.icon({
        iconUrl: 'images/icons/settlements/town.png',
        iconSize: i_size, iconAnchor: i_anchor, popupAnchor: p_anchor
    });
    // ICONS END



    /* =========================
       MARKERS and POPUPS
       =========================*/
    var latlngmarker = L.marker([-68, 50], {
        draggable:true,
        icon: doticon
    }).
    bindPopup().
    addTo(map).
    on('click', function(e){latlngmarker.getPopup().setContent(e.latlng.toString())
    });

    var longlat22 = L.marker([-22, -22.5], {icon: doticon})
    .bindPopup("<b>Longitude:</b> -22<br>\
               <b>Latitude:</b> -22.5");

    var silverport = L.marker([-72, -117], {icon: city_i})
    .bindPopup("<b>Silverport</b><br>\
               ...");


    var dwarftown1 = L.marker([-44, -47], {icon: town_i})
    .bindPopup("<b>Dwarf Town</b><br>\
                ...");
    // MARKERS and POPUPS END



    /* =========================
       TOOLTIPS
       =========================*/

    // COUNTRIES
    var countries_options= ({direction: 'center', interactive: true, permanent: true, className: "countries"});

    var estoria = L.tooltip([-58, -68], countries_options)
    .setContent('Estoria')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/23/estoria', "_blank")});

    var siberia = L.tooltip([35, -94], countries_options)
    .setContent('Siberia')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/25/siberia', "_blank")});

    var tova = L.tooltip([26, 80], countries_options)
    .setContent('Tova')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/26/tova', "_blank")});

    var storm_isles = L.tooltip([72, 63], countries_options)
    .setContent('Storm<br>Isles')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/24/storm-isles', "_blank")});

    var yellow_country = L.tooltip([-10, -18], countries_options)
    .setContent('Yellow<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/27/yellow-country', "_blank")});

    var green_country = L.tooltip([-50, 61], countries_options)
    .setContent('Green<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/29/green-country', "_blank")});

    var purple_country = L.tooltip([59, -14], countries_options)
    .setContent('Purple<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/28/purple-country', "_blank")});


    // LAKES
    var lakes_options= ({direction: 'center', interactive: true, permanent: true, className: "lakes"});

    // GREEN COUNTRY lakes
    var pp_lake = L.tooltip([-65.5, 77], lakes_options)
    .setContent("PP Lake")
    .bindPopup("A vaguely phallic shaped lake in the south of [green country].", {offset: [0, -6]})
    //.on('popupopen', function() {pp_lake.setOpacity(.5)}).on('popupclose', function(){pp_lake.setOpacity(1)})
    ;

    //smol GREEN COUNTRY lakes
    var lovelets_crater = L.tooltip([-76.2, 58], lakes_options)
    .setContent("Lovelet's<br>Crater")
    .bindPopup("A rounded body of freshwater, said to be created by the powerful mage 'Lovelet',\
                who sent a comet filled with water into the desert. Some say they can 'taste the cosmos'.", {offset: [0, -6]})
    //.on('popupopen', function() {lovelets_crater.setOpacity(.5)}).on('popupclose', function(){lovelets_crater.setOpacity(1)})
    ;

    var soaring_lagoon = L.tooltip([-74.7, 71], lakes_options)
    .setContent("Soaring<br>Lagoon")
    .bindPopup("A grand exposed coral reef, too hot to even dip a toe in for common folk.\
                Legends speak of a dragon sleeping under the reef.", {offset: [0, -6]})
    //.on('popupopen', function() {soaring_lagoon.setOpacity(.5)}).on('popupclose', function(){soaring_lagoon.setOpacity(1)})
    ;
    // GREEN COUNTRY lakes END

    // TOOLTIPS END



    /* =========================
       LAYER GROUPS
       =========================
    */
   var countries = [estoria, siberia, storm_isles, tova, green_country, yellow_country, purple_country];
    //countries only appear on zoom level 0
    map.on('zoomend', function () {
        L.layerGroup(countries).eachLayer(function (layer) {
            if (map.getZoom() > 1 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() < 2 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });

    var lakes = [pp_lake]
    var smol_lakes = [lovelets_crater, soaring_lagoon]
    //lakes only appear from zoom level 1 on
    map.on('zoomend', function () {
        L.layerGroup(lakes).eachLayer(function (layer) {
            if (map.getZoom() == 1 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() > 1 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });


    //smol lakes only appear from zoom level 1 on
    map.on('zoomend', function () {
        L.layerGroup(smol_lakes).eachLayer(function (layer) {
            if (map.getZoom() < 3 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() > 2 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });

    var rivers = [];
    // rivers only appear from zoom level 1

    var mountain_ranges = [];
    // mountain ranges only appear from zoom level 1

    var forests = [];
    // forests only appear from zoom level 1

    var lettering = [].concat(countries, lakes, smol_lakes);
    // opacity to .5 when opening letters popup
    /*L.layerGroup(lettering).eachLayer(function(layer){
        layer.on('popupopen', function(){
            layer.setOpacity(.3)}),
        layer.on('popupclose', function(){
            layer.setOpacity(1)})
    });*/

    var groupedOverlays = {
        "<span class='unboldify'>click the icons to toggle visability</span>": {
            "<span class='clickable'><img width='20px' src='images/icons/unused/dot.png'/>\
                <b>SHOW LETTERS</b>\
            </span>": L.layerGroup(lettering)
        },

        "<span class='clickable'><img width='20px' src='images/icons/unused/dot.png'/> SETTLEMENTS\
        </span>": {
            "<span class='clickable'> <img width='20px' src='images/icons/settlements/city.png'/>\
                cities\
            </span>": L.layerGroup([silverport]),
            "<span class='clickable'> <img width='20px' src='images/icons/settlements/town.png'/>\
                towns\
            </span>": L.layerGroup([dwarftown1])
        }
    };

    var options = {
        collapsed: true,
        // exclusiveGroups: ["icon category 1"],
        groupCheckboxes: true
    };

    L.control.groupedLayers(null, groupedOverlays, options).addTo(map);
    // LAYER GROUPS END

</script>

</body>
</html>