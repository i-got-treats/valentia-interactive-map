<!DOCTYPE html>
<html style="height: 100%; width:100%; margin: 0;">
<head>
    <style>
        /* zoom button style*/
        
        .leaflet-bar a {
            background-color: rgba(255, 255, 255, 0.4)!important;
        }
        .leaflet-bar a:hover,
        .leaflet-bar a:focus {
            background-color: rgba(244, 244, 244, 0.7)!important;
        }
        .leaflet-bar a.leaflet-disabled {
            background-color: rgba(244, 244, 244, 0.2)!important;
            color: rgba(86, 86, 86, 0.4)!important;
            }


        /* change layers ansicht */
        .leaflet-control-layers-toggle{
            height: 0px!important;
        }
        .leaflet-control-layers {
            /*overflow-y: auto;
            max-height: 95%;
            max-height: 95vh;
            position: sticky!important;
            width: auto;*/
            color:rgba(0, 0, 0, 0.4)!important;
            opacity: 0.5;
            background-color: rgba(197, 212, 221, 0.8)!important;
            transition: .2s;
        }
        .leaflet-control-layers:hover {
            opacity: 1;
        }
        .leaflet-control-layers:before{
            padding-left: 25px;
            padding-right: 25px;
            padding-top: 20px;
            font-size: 20px;
            font-weight: bold;
            content:"Map Legend";
            color:rgba(0, 0, 0, .7);
        }

        /*radio/checkbox button*/
        input[type=checkbox]:checked + span{
            color:rgba(0, 0, 0, 0.7) !important;
            font-weight: bold;
        }
        /* hoping to get the icon over the checkbox */
        .ico{
            vertical-align: middle;
            height: 17px;
        }
        /* change layers ansicht end*/

        /*POPUP STYLE*/
        .leaflet-popup-content-wrapper {
            /*max-width: 200px;
            max-height: 110px;
            overflow-y: auto;
            overflow-x: hidden;*/
            text-align: center!important;
            background: rgba(98, 98, 98, 0.8)!important;
            color: rgb(220, 220, 220)!important;
            font-size: 13px!important;
            line-height: 24px!important;
            border-radius: 0px!important;
            border: 2px solid rgba(185, 185, 185, 0.8)!important;
            box-shadow:rgba(0, 0, 0, .5) 0px 0px 10px!important;
        }
        .leaflet-popup-content {
            padding-right: 15px!important;
            padding-left: 15px!important;
            margin-right: 0px!important;
            margin-left: 0px!important;
            max-width: 200px!important;
            max-height: 110px!important;
            overflow-y: auto;
            overflow-x: hidden;
            }
        .leaflet-popup-content-wrapper a {
            color: rgba(200, 200, 200, 0.1)!important;
        }
        /* the triangle */
        .leaflet-popup-tip { 
            background: rgba(185, 185, 185, .3)!important;
            border: 2px solid rgba(185, 185, 185, 0.8)!important;
            box-shadow: rgba(0, 0, 0, .3) 0px 0px 10px!important;
        }
        .leaflet-container a.leaflet-popup-close-button {
            color: rgba(185, 185, 185, 0.8)!important;
        }
        .leaflet-container a.leaflet-popup-close-button:hover {
            color: #999;
        }
        /*POPUP STYLEs end*/



        /* TOOLTIP STYLE */
        /* no triangle at tooltip */
        .leaflet-tooltip-top:before, 
        .leaflet-tooltip-bottom:before, 
        .leaflet-tooltip-left:before, 
        .leaflet-tooltip-right:before {
            border: none !important;
        }
        /* TOOLTIPS STYLE end*/
    </style>

    <title>Map of Valentia</title>

    <meta name="viewpoint" content="width=device-width, initial-scale=1.0">

    <!-- leflet import -->
    <link rel="stylesheet" href="scripts\leaflet\leaflet.css">
    <script src="scripts\leaflet\leaflet.js"></script>
    <!-- grouped layer import
    <link rel="stylesheet" href="scripts\dist\leaflet.groupedlayercontrol.min.css">
    <script src="scripts\dist\leaflet.groupedlayercontrol.min.js"></script>-->
    <!-- tree import-->
    <link rel="stylesheet" href="scripts\tree\L.Control.Layers.Tree.css">
    <script src="scripts\tree\L.Control.Layers.Tree.js"></script>

    <!-- icons import-->
    <script src="scripts\my_scripts\icons.js"></script>
    <!-- rotations import -->
    <link rel="stylesheet" href="scripts\my_scripts\rotations.css">

</head>
<body style="height: 100%; width:100%;  margin: 0;">

<!-- map holder -->
<div id="map" style="margin-left:auto; margin-right:auto; width:100%; height: 100%; background: #6B7983">
</div>

<script type="text/javascript">
    //variables
    var mapSW = [0, 8192],
        mapNE = [8192, 0];
    var customMinZoom = 1;
    var customMaxZoom = 4;
    //variables end

    // Declare Map Object
    var map = L.map('map').setView([0, 0], customMinZoom);

    // Reference the tiles
    L.tileLayer('images/tiles/{z}/{x}/{y}.png',{
    minZoom: customMinZoom, maxZoom: customMaxZoom,
    noWrap: true,
    crs: L.CRS.Simple,}
    ).addTo(map);

    // map bounces back when you try to leave
    map.setMaxBounds(new L.LatLngBounds(
        map.unproject(mapNE, (customMaxZoom+1)),
        map.unproject(mapSW, (customMaxZoom+1))
    ));
    // no zoom on doubleclick
    map.doubleClickZoom.disable();










    /* =========================
       MARKERS and POPUPS
       =========================*/
    var latlngmarker = L.marker([-76, 94], {
        draggable:true,
        icon: doticon,
        opacity: .5
    }).bindPopup().addTo(map).
    on('click', function(e){
        latlngmarker.getPopup().setContent(e.latlng.toString())
    });

    //BUILDINGS
    var castles = [];
    var cathedrals = [];
    var colig = [];
    var crypts = [];
    var forts = [];
    var lighthouses = [];
    var stables = [];
    var strongholds = [];
    var taverns = [];
    var temples = [];
    var towers = [];
    var windmills = [];
    var buildings = [].concat(castles, cathedrals, colig, crypts, forts,
                              lighthouses, stables, strongholds, taverns, temples,
                              towers);

    //LANDMARKS
    var altars = [];
    var bridges = [];
    var dangerzones = [];
    var monoliths = [];
    var obelisks = [];
    var ruins = [];
    var shipwrecks = [];
    var shrines = [];
    var standing_stones = [];
    var thorns = [];
    var waterfall = [];
    var whirlpool = [];
    var landmarks = [].concat(altars, bridges, dangerzones, monoliths, obelisks, ruins,
                              shipwrecks, shrines, standing_stones, thorns, waterfall,
                              whirlpool, landmarks);

    //LOCATIONS
    var alchemists = [];
    var caves = [];
    var docs = [];
    var dungeons = [];
    var forges = [];
    var grainfarms = [];
    var mines = [];
    var ravenskulls = [];
    var vineyards = [];
    var locations = [].concat(alchemists, caves, docs, dungeons, forges, grainfarms, mines,
                              ravenskulls, vineyards);

    //SETTLEMENTS
    var camps = [];
    var cities = []
    var silverport = (L.marker([-72, -117], {icon: city_i})
    .bindPopup("<b>Silverport</b><br>\
               ..."));
    cities.push(silverport);
    var hut_villages = [];
    var huts = [];
    var legion_camps = [];
    var towns = []
    towns.push(L.marker([-44, -47], {icon: town_i})
    .bindPopup("<b>Dwarf Town</b><br>\
                ..."));
    var villages = [];
    var settlements = [].concat(camps, cities, hut_villages, huts, legion_camps, towns, villages);
    // MARKERS and POPUPS END

















    /* =========================
       TOOLTIPS
       =========================*/
    var zoom1 = [];
    var zoom2 = [];
    var zoom3 = [];

    // COUNTRIES
    var countries_options= ({direction: 'center', interactive: true, permanent: true, className: "countries"});

    var estoria = L.tooltip([-58, -68], countries_options)
    .setContent('Estoria')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/23/estoria', "_blank")});

    var siberia = L.tooltip([35, -94], countries_options)
    .setContent('Siberia')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/25/siberia', "_blank")});

    var tova = L.tooltip([26, 80], countries_options)
    .setContent('Tova')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/26/tova', "_blank")});

    var storm_isles = L.tooltip([72, 63], countries_options)
    .setContent('Storm<br>Isles')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/24/storm-isles', "_blank")});

    var yellow_country = L.tooltip([-10, -18], countries_options)
    .setContent('Yellow<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/27/yellow-country', "_blank")});

    var green_country = L.tooltip([-50, 61], countries_options)
    .setContent('Green<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/29/green-country', "_blank")});

    var purple_country = L.tooltip([59, -14], countries_options)
    .setContent('Purple<br>Country')
    .addTo(map)
    .on('click', function() {window.open('https://heroes-of-valentia.boards.net/thread/28/purple-country', "_blank")});

    // WATERS

    var water_options= ({direction: 'center', interactive: true, permanent: true, className: "water"});

    // ESTORIA
    var silver_bay = L.tooltip([-74.140276, -121.025391], water_options)
    .setContent("<div class='silver_bay'>Silver Bay</div>");
    zoom1.push(silver_bay);

    // GREEN COUNTRY
    var winged_lions_sea = L.tooltip([-29, 124], water_options)
    .setContent("<div class='winged_lions_sea'>Winged Lion's Sea</div>");
    zoom1.push(winged_lions_sea);

    var dalmation_gulf = L.tooltip([-30, 32], water_options)
    .setContent("<div class='dalmation_gulf'>Dalmatian Gulf</div>");
    zoom1.push(dalmation_gulf);

    var pp_lake = L.tooltip([-65.5, 77], water_options)
    .setContent("PP Lake")
    .bindPopup("A vaguely phallic shaped lake in the south of [green country].", {offset: [0, 0]})
    ;
    zoom1.push(pp_lake);

    var lovelets_crater = L.tooltip([-76.2, 58], water_options)
    .setContent("Lovelet's<br>Crater")
    .bindPopup("A rounded body of freshwater, said to be created by the powerful mage 'Lovelet',\
                who sent a comet filled with water into the desert. Some say they can 'taste the cosmos'.", {offset: [0, -6]})
    ;
    zoom2.push(lovelets_crater);

    var soaring_lagoon = L.tooltip([-74.7, 71], water_options)
    .setContent("Soaring<br>Lagoon")
    .bindPopup("A grand exposed coral reef, too hot to even dip a toe in for common folk.\
                Legends speak of a dragon sleeping under the reef.", {offset: [0, -6]})
    zoom2.push(soaring_lagoon);
    ;
    // GREEN COUNTRY waters END

    // ISLANDS
    var island_options = ({direction: 'center', interactive: true, permanent: true, className: "island"});

    var fortune_island = L.tooltip([-37, 12], island_options)
    .setContent("Fortune<br>Island")
    .bindPopup("A volcanic island.", {offset: [0,-12]});
    zoom2.push(fortune_island);

    var harolds_boot = L.tooltip([-78.5, -137], island_options)
    .setContent("Harold's Boot")
    .bindPopup("An island, vaguely the shape of a shoe. Under perfect conditions, Harold's Boot can be seen from Estoria's mainland.", {offset: [0,-6]});
    zoom1.push(harolds_boot);

    var hawkflight_island = L.tooltip([20, 150], island_options)
    .setContent("Hawkflight<br>Island")
    .bindPopup("An island, vaguely the shape of a shoe. Under perfect conditions, Harold's Boot can be seen from Estoria's mainland.", {offset: [0,-6]});
    zoom1.push(hawkflight_island);

    // TOOLTIPS END



















    /* =========================
       LAYER GROUPS
       =========================
    */
   var countries = [estoria, siberia, storm_isles, tova, green_country, yellow_country, purple_country];
    //countries only appear on zoom level 0
    map.on('zoomend', function () {
        L.layerGroup(countries).eachLayer(function (layer) {
            if (map.getZoom() > 1 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() < 2 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });

    // appear from zoom level 1 on
    map.on('zoomend', function () {
        L.layerGroup(zoom1).eachLayer(function (layer) {
            if (map.getZoom() == 1 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() > 1 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });

    // appear from zoom level 2 on
    map.on('zoomend', function () {
        L.layerGroup(zoom2).eachLayer(function (layer) {
            if (map.getZoom() < 3 && map.hasLayer(layer)) {
                map.removeLayer(layer);
            }
            if (map.getZoom() > 2 && map.hasLayer(layer) == false){
                map.addLayer(layer);
            }
        })
    });

    // appear from zoom level 3 on

    var rivers = [];
    // rivers only appear from zoom level 1

    var mountain_ranges = [];
    // mountain ranges only appear from zoom level 1

    var forests = [];
    // forests only appear from zoom level 1

    var lettering = [].concat(countries, zoom1, zoom2, zoom3);
    // opacity to .5 when opening letters popup
    L.layerGroup(lettering).eachLayer(function(layer){
        layer.on('popupopen', function(){
            layer.setOpacity(.3)}),
        layer.on('popupclose', function(){
            layer.setOpacity(1)})
    });



    /*  ===================
        LEGEND
        ===================
    */
    var legend = {
        label: "EVERYTHING",
        selectAllCheckbox: true,
        children: [
            {label: "Lettering",
            layer: L.layerGroup(lettering)},

            {label: "BUILDINGS",
            selectAllCheckbox: true,
            children:[
                { label: "<img class='ico' src='images/icons/buildings/castle.png'/>\
                Castles", layer: L.layerGroup(castles) },

                { label: "<img class='ico' src='images/icons/buildings/cathedral.png'/>\
                Cathedrals", layer: L.layerGroup(cathedrals) },

                { label: "<img class='ico' src='images/icons/buildings/colig.png'/>\
                Colig", layer: L.layerGroup(colig) },

                { label: "<img class='ico' src='images/icons/buildings/crypts.png'/>\
                Crypts", layer: L.layerGroup(crypts) },

                { label: "<img class='ico' src='images/icons/buildings/fort.png'/>\
                Forts", layer: L.layerGroup(forts) },

                { label: "<img class='ico' src='images/icons/buildings/lighthouse.png'/>\
                Lighthouses", layer: L.layerGroup(lighthouses) },

                { label: "<img class='ico' src='images/icons/buildings/stable.png'/>\
                Stables", layer: L.layerGroup(stables) },

                { label: "<img class='ico' src='images/icons/buildings/stronghold.png'/>\
                Strongholds", layer: L.layerGroup(strongholds) },

                { label: "<img class='ico' src='images/icons/buildings/tavern.png'/>\
                Taverns", layer: L.layerGroup(taverns) },

                { label: "<img class='ico' src='images/icons/buildings/temple.png'/>\
                Temples", layer: L.layerGroup(temples) },

                { label: "<img class='ico' src='images/icons/buildings/tower.png'/>\
                Towers", layer: L.layerGroup(towers) },

                { label: "<img class='ico' src='images/icons/buildings/windmill.png'/>\
                Windmills", layer: L.layerGroup(windmills) }
            ]},

            {label: "LANDMARKS",
            selectAllCheckbox: true,
            children:[
                { label: "<img class='ico' src='images/icons/landmarks/altar.png'/>\
                Altars", layer: L.layerGroup(altars) }
            ]},

            {label: "LOCATIONS",
            selectAllCheckbox: true,
            children:[
                { label: "<img class='ico' src='images/icons/locations/alchemist.png'/>\
                Alchemists", layer: L.layerGroup(alchemists) }
            ]},

            {label: "SETTLEMENTS",
            selectAllCheckbox: true,
            children:[
                { label: "<img class='ico' src='images/icons/settlements/city.png'/>\
                Cities", layer: L.layerGroup(cities) },
                { label: "<img class='ico' src='images/icons/settlements/town.png'/>\
                Towns", layer: L.layerGroup(towns) }
            ]}
            
        ]
    };
    L.control.layers.tree(null, legend).addTo(map)
    //.collapseTree(true).expandSelected(true)
    ;
    // LAYER GROUPS END

</script>

</body>
</html>